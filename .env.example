# ============================================================================
# CONFIGURAÇÕES DE AMBIENTE - RAG SYSTEM
# ============================================================================
# Copie este arquivo para .env e configure as variáveis conforme necessário

# ============================================================================
# AMBIENTE
# ============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO
PYTHONPATH=./src

# ============================================================================
# API KEYS - MODELOS DE LINGUAGEM
# ============================================================================

# OpenAI API Key (obrigatório para GPT models)
OPENAI_API_KEY=your_openai_api_key_here

# Anthropic API Key (opcional, para Claude models)
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Hugging Face API Key (opcional, para modelos HF)
HUGGINGFACE_API_KEY=your_huggingface_api_key_here

# Cohere API Key (opcional)
COHERE_API_KEY=your_cohere_api_key_here

# ============================================================================
# BANCO VETORIAL - QDRANT
# ============================================================================
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_API_KEY=
QDRANT_TIMEOUT=60
QDRANT_PREFER_GRPC=false

# ============================================================================
# BANCO DE GRAFOS - NEO4J
# ============================================================================
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_neo4j_password_here
NEO4J_DATABASE=neo4j
NEO4J_MAX_CONNECTION_LIFETIME=3600
NEO4J_MAX_CONNECTION_POOL_SIZE=50
NEO4J_CONNECTION_ACQUISITION_TIMEOUT=60

# ============================================================================
# CACHE - REDIS
# ============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your_redis_password_here
REDIS_DB=0
REDIS_MAX_CONNECTIONS=20
REDIS_SOCKET_TIMEOUT=30
REDIS_SOCKET_CONNECT_TIMEOUT=30
REDIS_RETRY_ON_TIMEOUT=true
REDIS_HEALTH_CHECK_INTERVAL=30

# ============================================================================
# CONFIGURAÇÕES DO RAG
# ============================================================================

# Modelo de embedding padrão
DEFAULT_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384
EMBEDDING_BATCH_SIZE=32
EMBEDDING_MAX_LENGTH=512

# Modelo de linguagem padrão
DEFAULT_LLM_MODEL=gpt-3.5-turbo
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2048
LLM_TOP_P=0.9
LLM_FREQUENCY_PENALTY=0.0
LLM_PRESENCE_PENALTY=0.0

# Configurações de chunking
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MIN_CHUNK_SIZE=100
MAX_CHUNK_SIZE=2000

# Configurações de retrieval
TOP_K_RESULTS=5
SIMILARITY_THRESHOLD=0.7
MAX_RETRIEVAL_RESULTS=20
RETRIEVAL_STRATEGY=hybrid

# Configurações de reranking
ENABLE_RERANKING=true
RERANKING_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2
RERANKING_TOP_K=3

# ============================================================================
# CONFIGURAÇÕES DE SEGURANÇA
# ============================================================================

# JWT Secret (gere uma chave segura)
JWT_SECRET_KEY=your_jwt_secret_key_here_minimum_32_characters
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# CORS
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# CONFIGURAÇÕES DE MONITORAMENTO
# ============================================================================

# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=8001
PROMETHEUS_METRICS_PATH=/metrics

# Logging
LOG_FORMAT=json
LOG_FILE_PATH=./logs/rag-system.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5
LOG_ROTATION=daily

# Tracing (opcional)
JAEGER_ENABLED=false
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831
JAEGER_SERVICE_NAME=rag-system

# ============================================================================
# CONFIGURAÇÕES DE PERFORMANCE
# ============================================================================

# Threading e Async
MAX_WORKERS=4
ASYNC_TIMEOUT=300
CONCURRENT_REQUESTS=10

# Memory Management
MAX_MEMORY_USAGE_MB=2048
GARBAGE_COLLECTION_THRESHOLD=1000

# Caching
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE=1000
CACHE_ENABLED=true

# ============================================================================
# CONFIGURAÇÕES DE DESENVOLVIMENTO
# ============================================================================

# Hot Reload
RELOAD=true
RELOAD_DIRS=./src

# Testing
TEST_DATABASE_URL=sqlite:///./test.db
TEST_OPENAI_API_KEY=test-key
TEST_TIMEOUT=300

# Debugging
DEBUG_SQL=false
DEBUG_EMBEDDINGS=false
DEBUG_LLM_CALLS=false

# ============================================================================
# CONFIGURAÇÕES DE PRODUÇÃO
# ============================================================================

# Server
HOST=0.0.0.0
PORT=8000
WORKERS=4
WORKER_CLASS=uvicorn.workers.UvicornWorker
WORKER_CONNECTIONS=1000
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=50
TIMEOUT=30
KEEPALIVE=2

# SSL (para produção)
SSL_KEYFILE=
SSL_CERTFILE=
SSL_CA_CERTS=
SSL_CIPHERS=TLSv1.2:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA

# Database Backup (para produção)
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=
BACKUP_S3_ACCESS_KEY=
BACKUP_S3_SECRET_KEY=

# ============================================================================
# CONFIGURAÇÕES ESPECÍFICAS DE MODELOS
# ============================================================================

# OpenAI específico
OPENAI_ORG_ID=
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_TIMEOUT=60
OPENAI_MAX_RETRIES=3

# Anthropic específico
ANTHROPIC_BASE_URL=https://api.anthropic.com
ANTHROPIC_TIMEOUT=60
ANTHROPIC_MAX_RETRIES=3

# Ollama (para modelos locais)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_TIMEOUT=300
OLLAMA_KEEP_ALIVE=5m

# ============================================================================
# CONFIGURAÇÕES DE INTEGRAÇÃO
# ============================================================================

# Webhook URLs
WEBHOOK_URL=
WEBHOOK_SECRET=
WEBHOOK_TIMEOUT=30

# External APIs
EXTERNAL_API_TIMEOUT=60
EXTERNAL_API_RETRIES=3
EXTERNAL_API_BACKOFF_FACTOR=2

# File Upload
MAX_FILE_SIZE_MB=100
ALLOWED_FILE_TYPES=pdf,txt,docx,md,json
UPLOAD_DIR=./data/uploads

# ============================================================================
# CONFIGURAÇÕES DE FEATURE FLAGS
# ============================================================================

# Experimental Features
ENABLE_GRAPH_RAG=true
ENABLE_MULTI_MODAL=false
ENABLE_STREAMING=true
ENABLE_BATCH_PROCESSING=true
ENABLE_AUTO_OPTIMIZATION=false

# Advanced Features
ENABLE_QUERY_EXPANSION=true
ENABLE_SEMANTIC_ROUTING=true
ENABLE_CONTEXT_COMPRESSION=true
ENABLE_ANSWER_VALIDATION=true

# ============================================================================
# NOTAS IMPORTANTES
# ============================================================================
# 
# 1. NUNCA commite o arquivo .env no repositório
# 2. Use senhas fortes para produção
# 3. Configure SSL/TLS para produção
# 4. Monitore o uso de recursos em produção
# 5. Faça backup regular dos dados
# 6. Teste todas as configurações em ambiente de staging
# 7. Use secrets management em produção (AWS Secrets Manager, etc.)
# 8. Configure alertas para métricas críticas
# 9. Implemente rotação de chaves API
# 10. Monitore logs de segurança regularmente